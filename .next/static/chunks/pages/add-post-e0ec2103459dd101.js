(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[206],{6702:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var i=n(66).ZP.img.withConfig({displayName:"UserIconImg",componentId:"sc-k5eqd1-0"})(["object-fit:cover;border-radius:100%;width:46px;height:46px;background-color:#fff;"])},422:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var i=n(7294),o=n(66),r=n(3946),a=n(1664),s=n.n(a),c=n(5893),d=function(e){var t=e.children,n=e.link;return(0,c.jsx)(p,{href:n,children:(0,c.jsx)(l,{children:t})})},l=(0,o.ZP)(r.Z).withConfig({displayName:"Icon__SIconButton",componentId:"sc-2ipogh-0"})(["padding:8px;text-decoration:none;font-size:inherit !important;width:160px;color:#fff;display:flex !important;align-items:center !important;color:inherit !important;border-radius:22px !important;flex-direction:column;@media (min-width:768px){}@media (min-width:1264px){text-align:left !important;flex-direction:row;}"]),p=(0,o.ZP)(s()).withConfig({displayName:"Icon__SLink",componentId:"sc-2ipogh-1"})(["text-decoration:none;color:#000;@media (min-width:425px){}"]),u=n(6638),f=n(4193),h=function(e){var t=e.isIcon;return(0,c.jsx)("div",{children:(0,c.jsxs)(d,{link:"/",children:[t?(0,c.jsx)(u.Z,{style:{width:"32",height:"32"}}):(0,c.jsx)(f.Z,{style:{width:"32",height:"32"}}),(0,c.jsx)(m,{isIcon:t,children:"\u30db\u30fc\u30e0"})]})})},m=o.ZP.small.withConfig({displayName:"Home__SIconText",componentId:"sc-1uvcjko-0"})(["font-weight:",";flex:1;width:120px;@media (min-width:768px){display:none;}@media (min-width:1264px){display:block;margin-left:auto;margin-left:30px !important;}"],(function(e){return e.isIcon?"800":"normal"})),x=n(6702),g=n(9473),b=function(e){var t=e.isIcon,n=(0,g.v9)((function(e){return e.user.user})),o="http://localhost:3000/assets/",r=(0,i.useState)(""),a=(r[0],r[1]);return(0,i.useEffect)((function(){a(null!==n&&void 0!==n&&n.profileImg?o+"person/"+n.profileImg:o+"person/noAvatar.png")}),[n]),(0,c.jsxs)(d,{link:"/profile/".concat(null===n||void 0===n?void 0:n.username),children:[(0,c.jsx)(w,{src:null===n||void 0===n?void 0:n.profileImg,isIcon:t}),(0,c.jsx)(v,{isIcon:t,children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"})]})},v=o.ZP.small.withConfig({displayName:"UserProfileIcon__SIconText",componentId:"sc-cuqkfo-0"})(["font-weight:",";letter-spacing:-0.1em;@media (min-width:432px){letter-spacing:0;}@media (min-width:768px){display:none;}@media (min-width:1264px){width:90px !important;margin-left:30px !important;display:block;}"],(function(e){return e.isIcon?"800":"normal"})),w=(0,o.ZP)(x.h).withConfig({displayName:"UserProfileIcon__SProfileIcon",componentId:"sc-cuqkfo-1"})(["width:32px;height:32px;padding-left:0;box-sizing:border-box;border:",";"],(function(e){return e.isIcon?"2px solid #000":"none"})),y=function(){return(0,c.jsx)(d,{link:"/add-post",children:(0,c.jsx)(j,{children:(0,c.jsx)(_,{})})})},j=o.ZP.div.withConfig({displayName:"AddPostIcon__ButtonContainer",componentId:"sc-mficnp-0"})(["display:flex;align-items:center;justify-content:center;width:40px;height:28px;background:linear-gradient(90deg,#e1f5fe 48%,#ffc1c1 52%);border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);"]),_=o.ZP.div.withConfig({displayName:"AddPostIcon__PlusSign",componentId:"sc-mficnp-1"})(["width:28px;height:100%;background-color:#ffffff;border-radius:4px;position:relative;::before,::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000;border-radius:2px;}::before{width:3px;height:16px;}::after{width:16px;height:3px;}"]),I=function(){var e=(0,i.useState)(!0),t=e[0],n=(e[1],(0,i.useState)(!0)),o=n[0],r=(n[1],(0,i.useState)(!0)),a=r[0];r[1];return(0,c.jsxs)(P,{children:[(0,c.jsx)(h,{isIcon:t}),(0,c.jsx)(y,{isIcon:o}),(0,c.jsx)(b,{isIcon:a})]})},P=o.ZP.footer.withConfig({displayName:"Footer__SFooter",componentId:"sc-6k62fi-0"})(["position:fixed;bottom:0;left:0;right:0;display:flex;align-items:center;z-index:1000000;background-color:rgb(255,255,255);width:100%;justify-content:space-around;border-top:1px solid #dbdbdb;@media (min-width:768px){padding:30px 0px 30px 20px;justify-content:space-between;height:280px;flex-direction:column;position:relative;flex:0.2;}@media (min-width:1264px){align-items:start;}"]),k=o.ZP.div.withConfig({displayName:"Layout__SFlex",componentId:"sc-675s55-0"})(["position:relative;display:flex;width:100%;"]),O=function(e){var t=e.children;return(0,c.jsxs)(k,{children:[(0,c.jsx)(I,{}),t]})}},4493:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var i=n(9499),o=n(7294),r=n(66),a=r.ZP.textarea.withConfig({displayName:"TextArea",componentId:"sc-149b9qh-0"})(["@media (max-width:425px){&{font-size:18px;}}padding:14px 3px;width:100%;max-width:500px;font-size:24px;resize:none;border:none;outline:none;height:auto;min-height:122px;&::placeholder{color:#ce936c;}"]),s=n(6702),c=n(29),d=n(7794),l=n.n(d),p=n(6154),u=n(7896),f=n(1163),h=n(3385),m=n(422),x=n(9473),g=n(1697),b=n(7536),v=n(2757),w=n.n(v),y=n(2105),j=n.n(y),_=n(5893);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1],i=(0,o.useState)(),r=i[0],s=i[1],d=(0,o.useState)(!1),m=d[0],v=d[1],y=(0,b.cI)(),I=y.register,k=y.handleSubmit,A=y.watch,F=y.setValue,D=A("desc","");(0,o.useEffect)((function(){var e=D.trim().length;n(e>0&&e<=50)}),[D,n]);var T=function(e,t){var n=(0,f.useRouter)(),i=(0,h.v)((function(e){return e.user})).user,o=function(){var o=(0,c.Z)(l().mark((function o(r){var a,s,c,d,f,h;return l().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t(!0),r&&i){o.next=3;break}return o.abrupt("return");case 3:if(a={userId:i._id,desc:r},!e){o.next=23;break}return s=(0,u.Z)(e),c="".concat(i.username,"/post Image"),(d=new FormData).append("path",c),d.append("file",s),o.prev=10,o.next=13,p.Z.post("/api/upload/uploadImages",d);case 13:f=o.sent,h=f.data,console.log(h,"data"),a.img=h.url.url,o.next=23;break;case 19:o.prev=19,o.t0=o.catch(10),console.log(o.t0),alert(o.t0);case 23:return o.prev=23,o.next=26,p.Z.post("/api/posts",a);case 26:n.push("/"),o.next=32;break;case 29:o.prev=29,o.t1=o.catch(23),console.log(o.t1);case 32:return o.prev=32,t(!1),o.finish(32);case 35:case"end":return o.stop()}}),o,null,[[10,19],[23,29,32,35]])})));return function(e){return o.apply(this,arguments)}}();return{AddPost:o,user:i}}(r,v),M=T.AddPost,L=(0,f.useRouter)(),U=(0,x.I0)(),B=(0,h.v)((function(e){return e.user})),R=B.user,q=B.loading;(0,o.useEffect)((function(){U((0,g.Ez)())}),[]),(0,o.useEffect)((function(){R||q||L.push("/login")}),[R]);return q?(0,_.jsx)("div",{className:"loader-container",children:(0,_.jsx)(w(),{color:"#ed6103",loading:!0,size:50})}):(0,_.jsx)(O,{children:(0,_.jsx)(N,{children:(0,_.jsx)(Z,{htmlFor:"textForm",children:(0,_.jsxs)(C,{method:"post",onSubmit:k((function(e){var t=e.desc;return M(t)})),children:[(0,_.jsx)(S,{src:null===R||void 0===R?void 0:R.profileImg}),(0,_.jsx)(a,P(P({placeholder:"50\u6587\u5b57\u4ee5\u5185\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044"},I("desc")),{},{onChange:function(e){!function(e){var t=e.target.value.trim().length;n(t>0&&t<=50)}(e),F("desc",e.target.value)}})),r&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("img",{src:r,alt:""})}),(0,_.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.readAsDataURL(t),n.onload=function(e){s(e.target.result)}}}}),(0,_.jsx)(E,{}),(0,_.jsxs)("p",{style:{color:D.length>50?"red":"inherit"},children:[D.length,"/50"]}),(0,_.jsx)(z,{isText:t,disabled:m,type:"submit",children:m?(0,_.jsx)(j(),{color:"#fff",size:5}):"\u9001\u4fe1"})]})})})})},O=r.ZP.div.withConfig({displayName:"add-post__SPostBox",componentId:"sc-2k7fvz-0"})(["flex:1;@media (min-width:768px){flex:0.9;}@media (min-width:1264px){flex:0.8;}"]),S=(0,r.ZP)(s.h).withConfig({displayName:"add-post__SUserIconImg",componentId:"sc-2k7fvz-1"})([""]),Z=r.ZP.label.withConfig({displayName:"add-post__SLabel",componentId:"sc-2k7fvz-2"})(["display:block;max-width:500px;width:70%;margin:0 auto;background-color:#fff;padding:32px 0 72px;border-radius:20px;"]),C=r.ZP.form.withConfig({displayName:"add-post__SForm",componentId:"sc-2k7fvz-3"})(["position:relative;z-index:2;max-width:500px;width:90%;margin:0 auto;background-color:#fff;"]),N=r.ZP.div.withConfig({displayName:"add-post__Scenter",componentId:"sc-2k7fvz-4"})(["width:100%;height:100vh;background-color:#f5f5f5;display:flex;justify-content:center;align-items:center;"]),z=r.ZP.button.withConfig({displayName:"add-post__SSubmit",componentId:"sc-2k7fvz-5"})(["width:125px;@media (max-width:425px){&{width:100px;font-size:12px;}}text-align:center;font-size:14px;font-weight:bold;padding:10px 15px 10px 17px;border-radius:22px;border:none;color:#fff;background-color:#ed6103;border:none;margin-left:auto;&:hover{background-color:#ff6702;}pointer-events:",";background-color:",";cursor:pointer;"],(function(e){return e.isText?"auto":"none"}),(function(e){return e.isText?"#ff6702":"#9e9c9c"})),E=r.ZP.hr.withConfig({displayName:"add-post__SHr",componentId:"sc-2k7fvz-6"})(["border:1px solid rgb(207,217,222);margin-top:52px;margin-bottom:42px;"]);k.getLayout=function(e){return(0,_.jsx)(m.Z,{children:e})};var A=k},841:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/add-post",function(){return n(4493)}])},2105:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var c=a(n(7294)),d=n(6657),l=(0,n(10).createAnimation)("PulseLoader","0% {transform: scale(1); opacity: 1} 45% {transform: scale(0.1); opacity: 0.7} 80% {transform: scale(1); opacity: 1}","pulse");t.default=function(e){var t=e.loading,n=void 0===t||t,o=e.color,r=void 0===o?"#000000":o,a=e.speedMultiplier,p=void 0===a?1:a,u=e.cssOverride,f=void 0===u?{}:u,h=e.size,m=void 0===h?15:h,x=e.margin,g=void 0===x?2:x,b=s(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),v=i({display:"inherit"},f),w=function(e){return{backgroundColor:r,width:(0,d.cssValue)(m),height:(0,d.cssValue)(m),margin:(0,d.cssValue)(g),borderRadius:"100%",display:"inline-block",animation:"".concat(l," ").concat(.75/p,"s ").concat(.12*e/p,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return n?c.createElement("span",i({style:v},b),c.createElement("span",{style:w(1)}),c.createElement("span",{style:w(2)}),c.createElement("span",{style:w(3)})):null}},7896:function(e,t,n){"use strict";function i(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return new Blob([i],{type:n})}n.d(t,{Z:function(){return i}})}},function(e){e.O(0,[452,158,536,43,774,888,179],(function(){return t=841,e(e.s=t);var t}));var t=e.O();_N_E=t}]);