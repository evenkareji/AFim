(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3540:function(e,n,t){"use strict";var o=t(4836);n.Z=void 0;var i=o(t(4938)),r=t(5893),s=(0,i.default)((0,r.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"}),"Logout");n.Z=s},6702:function(e,n,t){"use strict";t.d(n,{h:function(){return o}});var o=t(66).ZP.img.withConfig({displayName:"UserIconImg",componentId:"sc-k5eqd1-0"})(["object-fit:cover;border-radius:100%;width:46px;height:46px;background-color:#fff;"])},422:function(e,n,t){"use strict";t.d(n,{Z:function(){return C}});var o=t(7294),i=t(66),r=t(3946),s=t(1664),a=t.n(s),c=t(5893),l=function(e){var n=e.children,t=e.link;return(0,c.jsx)(p,{href:t,children:(0,c.jsx)(d,{children:n})})},d=(0,i.ZP)(r.Z).withConfig({displayName:"Icon__SIconButton",componentId:"sc-2ipogh-0"})(["padding:8px;text-decoration:none;font-size:inherit !important;width:160px;color:#fff;display:flex !important;align-items:center !important;color:inherit !important;border-radius:22px !important;flex-direction:column;@media (min-width:768px){}@media (min-width:1264px){text-align:left !important;flex-direction:row;}"]),p=(0,i.ZP)(a()).withConfig({displayName:"Icon__SLink",componentId:"sc-2ipogh-1"})(["text-decoration:none;color:#000;@media (min-width:425px){}"]),f=t(6638),u=t(4193),h=function(e){var n=e.isIcon;return(0,c.jsx)("div",{children:(0,c.jsxs)(l,{link:"/",children:[n?(0,c.jsx)(f.Z,{style:{width:"32",height:"32"}}):(0,c.jsx)(u.Z,{style:{width:"32",height:"32"}}),(0,c.jsx)(x,{isIcon:n,children:"\u30db\u30fc\u30e0"})]})})},x=i.ZP.small.withConfig({displayName:"Home__SIconText",componentId:"sc-1uvcjko-0"})(["font-weight:",";flex:1;width:120px;@media (min-width:768px){display:none;}@media (min-width:1264px){display:block;margin-left:auto;margin-left:30px !important;}"],(function(e){return e.isIcon?"800":"normal"})),g=t(6702),m=t(9473),w=function(e){var n=e.isIcon,t=(0,m.v9)((function(e){return e.user.user})),i=(0,o.useState)(""),r=(i[0],i[1]);return(0,o.useEffect)((function(){r(null===t||void 0===t?void 0:t.profileImg)}),[t]),(0,c.jsxs)(l,{link:"/profile/".concat(null===t||void 0===t?void 0:t.username),children:[(0,c.jsx)(v,{src:null===t||void 0===t?void 0:t.profileImg,isIcon:n}),(0,c.jsx)(b,{isIcon:n,children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"})]})},b=i.ZP.small.withConfig({displayName:"UserProfileIcon__SIconText",componentId:"sc-cuqkfo-0"})(["font-weight:",";letter-spacing:-0.1em;@media (min-width:432px){letter-spacing:0;}@media (min-width:768px){display:none;}@media (min-width:1264px){width:90px !important;margin-left:30px !important;display:block;}"],(function(e){return e.isIcon?"800":"normal"})),v=(0,i.ZP)(g.h).withConfig({displayName:"UserProfileIcon__SProfileIcon",componentId:"sc-cuqkfo-1"})(["width:32px;height:32px;padding-left:0;box-sizing:border-box;border:",";"],(function(e){return e.isIcon?"2px solid #000":"none"})),k=function(){return(0,c.jsx)(l,{link:"/add-post",children:(0,c.jsx)(_,{children:(0,c.jsx)(I,{})})})},_=i.ZP.div.withConfig({displayName:"AddPostIcon__ButtonContainer",componentId:"sc-mficnp-0"})(["display:flex;align-items:center;justify-content:center;width:40px;height:28px;background:linear-gradient(90deg,#e1f5fe 48%,#ffc1c1 52%);border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);"]),I=i.ZP.div.withConfig({displayName:"AddPostIcon__PlusSign",componentId:"sc-mficnp-1"})(["width:28px;height:100%;background-color:#ffffff;border-radius:4px;position:relative;::before,::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000;border-radius:2px;}::before{width:3px;height:16px;}::after{width:16px;height:3px;}"]),y=function(){var e=(0,o.useState)(!0),n=e[0],t=(e[1],(0,o.useState)(!0)),i=t[0],r=(t[1],(0,o.useState)(!0)),s=r[0];r[1];return(0,c.jsxs)(j,{children:[(0,c.jsx)(h,{isIcon:n}),(0,c.jsx)(k,{isIcon:i}),(0,c.jsx)(w,{isIcon:s})]})},j=i.ZP.footer.withConfig({displayName:"Footer__SFooter",componentId:"sc-6k62fi-0"})(["position:fixed;bottom:0;left:0;right:0;display:flex;align-items:center;z-index:1000000;background-color:rgb(255,255,255);width:100%;justify-content:space-around;border-top:1px solid #dbdbdb;@media (min-width:768px){padding:30px 0px 30px 20px;justify-content:space-between;height:280px;flex-direction:column;position:relative;flex:0.2;}@media (min-width:1264px){align-items:start;}"]),P=i.ZP.div.withConfig({displayName:"Layout__SFlex",componentId:"sc-675s55-0"})(["position:relative;display:flex;width:100%;"]),C=function(e){var n=e.children;return(0,c.jsxs)(P,{children:[(0,c.jsx)(y,{}),n]})}},4741:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return K},default:function(){return Q}});var o=t(29),i=t(7794),r=t.n(i),s=t(7294),a=t(66),c=t(1664),l=t.n(c),d=t(3385),p=t(5121),f=t(9473),u=t(1697),h=t(1163),x=t(5893),g=function(e){var n=e.isGood;return(0,x.jsx)(m,{isGood:n,children:(0,x.jsx)("i",{className:"material-icons heart",children:"favorite"})})},m=a.ZP.div.withConfig({displayName:"HeartIcon__HeartClick",componentId:"sc-1b7z41-0"})(["animation:",";"],(function(e){return e.isGood?(0,a.iv)([""," 1.2s forwards cubic-bezier(0.19,1,0.22,1)"],w):(0,a.iv)([""," 1.2s forwards cubic-bezier(0.19,1,0.22,1)"],b)})),w=(0,a.F4)(["0%{transform:scale(0) rotate(0);}50%{transform:scale(1) rotate(0) ease;background:linear-gradient(90deg,#ff0011,#ff000d 30%,hsl(0,95%,56%));background:-webkit-linear-gradient(90deg,#d6f700,#a2ff00 30%,#ffefd1);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}55%{transform:scale(1.3) rotate(0deg) translateY(-50%);background:linear-gradient(90deg,#ff37c3,#ff00aa 100%,#ff1b6b);background:-webkit-linear-gradient(90deg,#ff37c3,#ff00aa 100%,#ff1b6b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}80%{transform:scale(1.3) rotate(0deg) translateY(-30%);background:linear-gradient( 90deg,hsl(57,100%,81%),hsl(57,97%,45%),hsl(57,100%,84%) );background:-webkit-linear-gradient( 90deg,hsl(57,100%,81%),hsl(57,97%,45%),hsl(57,100%,84%) );-webkit-background-clip:text;-webkit-text-fill-color:transparent;}90%{transform:scale(1.3) rotate(45deg) translateY(-10%);background:linear-gradient(90deg,#ff37c3,#ff00aa 100%,#ff1b6b);background:-webkit-linear-gradient(90deg,#ff37c3,#ff00aa 100%,#ff1b6b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}100%{transform:scale(1) rotate(0) translateY(0);color:#ff6702;}"]),b=(0,a.F4)(["0%{color:#ecaa25}100%{color:#d2c4c4}"]),v=t(3946),k=a.ZP.div.withConfig({displayName:"BaseBtn",componentId:"sc-vyvasj-0"})(["font-size:12px;font-weight:bold;width:100%;"]),_=(0,s.memo)((function(e){var n=e.children,t=e.onClickFollow;return console.log("FollowButton"),(0,x.jsx)(v.Z,{style:{padding:"0px"},onClick:t,children:(0,x.jsx)(I,{className:"unfollow-bg-color",children:n})})})),I=(0,a.ZP)(k).withConfig({displayName:"FollowButton__SUnFollowBtn",componentId:"sc-wzess8-0"})(["width:100%;font-size:12px;font-weight:bold;padding:6px 15px 5px 17px;border-radius:8px;background:#ff8d06;color:#fff;&:hover{background:#ff6702;}"]),y=(0,s.memo)((function(e){console.log("%cChild render\u3000OnFollowBtn","color:blue");var n=e.children,t=e.onClickUnFollow;return(0,x.jsx)(v.Z,{style:{padding:"0px"},onClick:t,children:(0,x.jsx)(j,{children:n})})})),j=(0,a.ZP)(k).withConfig({displayName:"FollowingButton__SOnFollowBtn",componentId:"sc-3077yn-0"})(["width:100%;font-size:12px;font-weight:bold;padding:6px 15px 5px 17px;border-radius:8px;border:none;color:#0f0f0f;background-color:rgba(0,0,0,0.05);&:hover{background-color:#dbdbdb;}"]),P=s.memo((function(e){var n,t=e.loginUser,o=e.postUserId,i=e.onClickFollow,r=e.onClickUnFollow;return t&&t._id!==o?(null===(n=t.followings)||void 0===n?void 0:n.includes(o))?(0,x.jsx)(y,{onClickUnFollow:r,children:"\u30d5\u30a9\u30ed\u30fc\u4e2d"}):(0,x.jsx)(_,{onClickFollow:i,children:"\u30d5\u30a9\u30ed\u30fc"}):null})),C=function(e){var n=e.post,t=function(){var e=(0,f.I0)(),n=function(){var n=(0,o.Z)(r().mark((function n(t,o){var i,s,a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o){n.next=15;break}return n.prev=1,i=t.userId,n.next=5,p.Z.put("/api/users/".concat(i,"/follow"),{userId:o._id});case 5:s=n.sent,a=s.data,e((0,u.Gm)(a)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.log(n.t0);case 13:n.next=16;break;case 15:console.log("Error: loginUser is null");case 16:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e,t){return n.apply(this,arguments)}}();return{followUser:n}}(),i=t.followUser,a=function(){var e=(0,f.I0)(),n=function(){var n=(0,o.Z)(r().mark((function n(t,o){var i,s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o){n.next=14;break}return n.prev=1,n.next=4,p.Z.put("/api/users/".concat(t.userId,"/unfollow"),{userId:o._id});case 4:i=n.sent,s=i.data,e((0,u.Gm)(s)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0);case 12:n.next=15;break;case 14:console.log("Error: loginUser is null");case 15:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}();return{unFollowUser:n}}(),c=a.unFollowUser,m=function(){var e=(0,s.useState)(),n=e[0],t=e[1],i=function(){var e=(0,o.Z)(r().mark((function e(n){var o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.get("/api/users/".concat(n.userId));case 2:o=e.sent,t(o.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{getAuthorByPostId:i,user:n}}(),w=m.getAuthorByPostId,b=m.user,v=(0,h.useRouter)(),k=(0,d.v)((function(e){return e.user})),_=k.user,I=k.loading,y=function(e,n){var t=(0,s.useState)(!!n&&e.likes.includes(n._id)),i=t[0],a=t[1];return{toggleLike:(0,s.useCallback)((0,o.Z)(r().mark((function t(){var o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,i?--e.likes.length:++e.likes.length,t.next=6,p.Z.put("/api/posts/".concat(e._id,"/like"),{userId:n._id});case 6:o=t.sent,a(o.data),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),[i,e,n]),isGood:i}}(n,_),j=y.toggleLike,C=y.isGood;(0,s.useEffect)((function(){_||I||v.push("/login")}),[I,_,v]),(0,s.useEffect)((function(){w(n)}),[n,w]);var O=(0,s.useCallback)((function(){return i(n,_)}),[n._id,null===_||void 0===_?void 0:_._id,i]),T=(0,s.useCallback)((function(){return c(n,_)}),[n._id,null===_||void 0===_?void 0:_._id,c]);return _?(0,x.jsxs)(L,{children:[n.img&&(0,x.jsx)(A,{src:n.img,alt:""}),(0,x.jsx)(G,{}),(0,x.jsxs)(N,{children:[(0,x.jsxs)(S,{children:[(0,x.jsx)(l(),{href:"profile/".concat(null===b||void 0===b?void 0:b.username),children:(0,x.jsx)(B,{src:null===b||void 0===b?void 0:b.profileImg})}),(0,x.jsxs)(z,{children:[(0,x.jsx)(V,{children:null===b||void 0===b?void 0:b.username}),(0,x.jsx)(P,{loginUser:_,postUserId:n.userId,onClickFollow:O,onClickUnFollow:T})]})]}),(0,x.jsx)(F,{children:(0,x.jsx)(U,{children:n.desc})})]}),(0,x.jsxs)(E,{children:[(0,x.jsx)(Z,{onClick:j,children:(0,x.jsx)(g,{isGood:C})}),(0,x.jsx)(H,{children:n.likes.length})]})]}):null},Z=a.ZP.div.withConfig({displayName:"PostView__SHeartBox",componentId:"sc-mp07b1-0"})(["cursor:pointer;"]),N=a.ZP.div.withConfig({displayName:"PostView__SPostContent",componentId:"sc-mp07b1-1"})(["position:absolute;top:25%;left:38px;width:74%;height:70%;"]),S=a.ZP.header.withConfig({displayName:"PostView__SPostHeader",componentId:"sc-mp07b1-2"})(["display:flex;align-items:start;"]),F=a.ZP.div.withConfig({displayName:"PostView__SDescContainer",componentId:"sc-mp07b1-3"})(["height:50%;display:flex;flex-direction:column;justify-content:center;text-align:left;"]),U=a.ZP.p.withConfig({displayName:"PostView__SPostArticle",componentId:"sc-mp07b1-4"})(["font-size:24px;color:#000;font-weight:normal;line-height:1.5em;text-shadow:0px 0px 1px rgba(0,0,0,0.2);"]),z=a.ZP.div.withConfig({displayName:"PostView__Box",componentId:"sc-mp07b1-5"})(["margin-left:20px;"]),B=a.ZP.img.withConfig({displayName:"PostView__SUserIconImg",componentId:"sc-mp07b1-6"})(["object-fit:cover;border-radius:100%;max-width:none;width:52px;height:52px;background-color:#fff;cursor:pointer;"]),V=a.ZP.h1.withConfig({displayName:"PostView__SUserName",componentId:"sc-mp07b1-7"})(["color:#000;font-size:16px;font-weight:bold;"]),E=a.ZP.div.withConfig({displayName:"PostView__SAside",componentId:"sc-mp07b1-8"})(["position:absolute;display:flex;flex-direction:column;top:62%;align-items:center;right:10px;padding:20px;text-align:center;"]),H=a.ZP.span.withConfig({displayName:"PostView__HeartCount",componentId:"sc-mp07b1-9"})(["margin-bottom:18px;color:#000;"]),L=a.ZP.div.withConfig({displayName:"PostView__PostBorder",componentId:"sc-mp07b1-10"})(["position:relative;width:100%;height:100%;scroll-snap-align:start;scroll-snap-stop:always;"]),G=a.ZP.div.withConfig({displayName:"PostView__SBg",componentId:"sc-mp07b1-11"})(["position:relative;width:100%;height:100vh;object-fit:cover;background-color:#fafafa;"]),A=a.ZP.img.withConfig({displayName:"PostView__SImg",componentId:"sc-mp07b1-12"})(["height:100vh;object-fit:cover;"]),O=t(3540),T=t(422),Y=t(2757),q=t.n(Y),M=function(e){var n=e.posts,t=(0,h.useRouter)(),i=(0,d.v)((function(e){return e.user})),a=i.user,c=i.loading,l=(0,f.I0)();(0,s.useEffect)((function(){l((0,u.Ez)())}),[]),(0,s.useEffect)((function(){a||c||t.push("/login")}),[a]);var p=(0,s.useCallback)((0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{l((0,u.kS)())}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)}))),[l,t]);return c?(0,x.jsx)("div",{className:"loader-container",children:(0,x.jsx)(q(),{color:"#ed6103",loading:!0,size:50})}):(0,x.jsxs)(X,{children:[(0,x.jsx)(R,{onClick:p,children:(0,x.jsx)(O.Z,{style:{fontSize:"14px"}})}),(0,x.jsx)(D,{children:(0,x.jsx)(J,{children:n.map((function(e){return(0,x.jsx)(C,{post:e},e._id)}))})})]})},R=a.ZP.div.withConfig({displayName:"pages__SLogoutButton",componentId:"sc-14p60n7-0"})(["padding:10px;font-size:12px;border-radius:15px;text-align:center;background:#dfdfdf;color:#626161;position:absolute;top:10%;left:20px;cursor:pointer;z-index:10;"]),X=a.ZP.div.withConfig({displayName:"pages__SPostMain",componentId:"sc-14p60n7-1"})(["position:relative;flex:1;@media (min-width:768px){flex:0.9;}@media (min-width:1264px){flex:0.8;}"]),D=a.ZP.div.withConfig({displayName:"pages__PostBg",componentId:"sc-14p60n7-2"})(["color:white;background-color:#000;height:100vh;display:grid;place-items:center;"]),J=a.ZP.div.withConfig({displayName:"pages__PostSlide",componentId:"sc-14p60n7-3"})(["width:100%;height:100%;max-width:100%;border-radius:0;&::-webkit-scrollbar{display:none;}@media (min-width:425px){&{max-width:400px;width:100%;height:95vh;border-radius:20px;}}display:flex;flex:1;align-items:center;flex-direction:column;overflow:scroll;overflow-y:auto;scroll-snap-type:y mandatory;"]);M.getLayout=function(e){return(0,x.jsx)(T.Z,{children:e})};var K=!0,Q=M},8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4741)}])}},function(e){e.O(0,[452,158,43,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);